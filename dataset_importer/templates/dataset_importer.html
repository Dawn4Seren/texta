{% extends "index.html" %}
{% block app %}

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/css/bootstrap-select.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/bootstrap-select.min.js"></script>
    <script src="{{STATIC_URL}}jquery.doubleScroll.js"></script>

    <link rel="stylesheet" type="text/css" href="{{STATIC_URL}}dataset_importer/dataset_importer.css">

    <div class="col-md-3">
        <div class="panel">
            <div class="panel-heading">
                New Dataset
            </div>

            <div class="panel-body">
            <form action="" id="import-dataset-form">
                {% include "parameters/formats.html" %}

                {% include "parameters/data.html" %}

                {% include "parameters/elastic.html" %}

                {% include "parameters/preprocessors.html" %}

                <!-- <button id="import-dataset-btn" class="btn btn-success pull-right">Import</button> -->
                <input type="submit" value="Import" id="import-dataset-btn" class="btn btn-success pull-right" disabled></button>
            </form>
                <div class="loaderDiv" id="loaderDiv">
                    <div id="loader" class="loader"></div>
                    <p class="statusText" id="status"> Error importing database! </p>
                </div>

            </div>
        </div>
    </div>

    <div class="col-md-9">
        <div class="panel">
            <div class="panel-heading">
                Import Jobs
            </div>

            <div class="panel-body" id="jobs-table-div">
                {% include "import_jobs_table.html" %}
            </div>
        </div>
    </div>


    {% for job in jobs %}
    <div id="import-job-{{ job.pk }}-details" class="modal fade" role="dialog">
      <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Import Details</h4>
          </div>
          <div class="modal-body">
            <table class="table">
                <tbody>
                    <tr>
                        <td>ID:</td>
                        <td>{{ job.pk }}</td>
                    </tr>
                    <tr>
                        <td>User:</td>
                        <td>{{ job.user }}</td>
                    </tr>
                    <tr>
                        <td>Job status:</td>
                        <td>{{ job.status }}</td>
                    </tr>
                    <tr>
                        <td>Job started:</td>
                        <td>{{ job.start_time }}</td>
                    </tr>
                    <tr>
                        <td>Job completed:</td>
                        <td>{{ job.end_time }}</td>
                    </tr>
                    <tr>
                        <td>Elasticsearch index:</td>
                        <td>{{ job.elastic_index }}</td>
                    </tr>
                    <tr>
                        <td>Elasticsearch mapping:</td>
                        <td>{{ job.elastic_mapping }}</td>
                    </tr>
                    <tr>
                        <td>Processed documents:</td>
                        <td>{{ job.processed_documents }}</td>
                    </tr>
                    <tr>
                        <td>Total documents:</td>
                        <td>{{ job.total_documents }}</td>
                    </tr>
                    <tr>
                        <td>Source type:</td>
                        <td>{{ job.source_type }}</td>
                    </tr>
                    <tr>
                        <td>Source name:</td>
                        <td>{{ job.source_name }}</td>
                    </tr>
                    <tr>
                        <td>Is synchronized:</td>
                        <td>{{ job.must_sync }}</td>
                    </tr>
                    <tr>
                        <td>JSON parameters:</td>
                        <td>{{ job.json_parameters }}</td>
                    </tr>
                </tbody>

            </table>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>

      </div>
    </div>
    {% endfor %}

    <script type="application/javascript" src="{{STATIC_URL}}dataset_importer/argument_collectors.js"></script>
    <script type="application/javascript" src="{{STATIC_URL}}dataset_importer/dataset_importer.js"></script>
{#    https://cdnjs.com/libraries/1000hz-bootstrap-validator#}

{% endblock %}
